{"version":3,"file":"graph-2d-force.js","sources":["../../../home/runner/work/metastanza/metastanza/stanzas/graph-2d-force/drawForceLayout.js","../../../home/runner/work/metastanza/metastanza/stanzas/graph-2d-force/index.js"],"sourcesContent":["import * as d3 from \"d3\";\nexport default function (\n  svg,\n  nodes,\n  edges,\n  {\n    width,\n    height,\n    MARGIN,\n    symbols,\n    labelsParams,\n    tooltipParams,\n    highlightAdjEdges,\n  }\n) {\n  const HEIGHT = height - MARGIN.TOP - MARGIN.BOTTOM;\n  const WIDTH = width - MARGIN.LEFT - MARGIN.RIGHT;\n\n  const forceG = svg\n    .append(\"g\")\n    .attr(\"id\", \"forceG\")\n    .attr(\"transform\", `translate(${MARGIN.LEFT},${MARGIN.TOP})`);\n\n  const gLinks = forceG.append(\"g\").attr(\"class\", \"links\");\n  const gNodes = forceG.append(\"g\").attr(\"class\", \"nodes\");\n\n  const simulation = d3\n    .forceSimulation(nodes)\n    .force(\"charge\", d3.forceManyBody().strength(-100))\n    .force(\"center\", d3.forceCenter(width / 2, height / 2).strength(0.05))\n    .force(\n      \"link\",\n      d3\n        .forceLink()\n        .links(edges)\n        .id((d) => d.id)\n        .distance(50)\n        .strength(0.5)\n    )\n    .force(\n      \"collide\",\n      d3\n        .forceCollide()\n        .radius((d) => d[symbols.nodeSizeSym])\n        .iterations(2)\n        .strength(0.9)\n    )\n    .on(\"tick\", ticked);\n\n  const links = gLinks\n    .selectAll(\"line\")\n    .data(edges)\n    .join(\"line\")\n    .style(\"stroke-width\", (d) => d[symbols.edgeWidthSym])\n    .style(\"stroke\", (d) => d[symbols.edgeColorSym])\n    .attr(\"class\", \"link\");\n\n  function updateLinks() {\n    links\n      .attr(\"x1\", (d) => d.source.x)\n      .attr(\"y1\", (d) => d.source.y)\n      .attr(\"x2\", (d) => d.target.x)\n      .attr(\"y2\", (d) => d.target.y);\n  }\n  function updateNodes() {\n    nodeGroups.attr(\"transform\", (d) => {\n      const r = d[symbols.nodeSizeSym];\n      const dx = Math.max(r, Math.min(WIDTH - r, d.x));\n      const dy = Math.max(r, Math.min(HEIGHT - r, d.y));\n      d.x = dx;\n      d.y = dy;\n      return `translate(${d.x},${d.y})`;\n    });\n  }\n\n  function ticked() {\n    updateNodes();\n    updateLinks();\n  }\n\n  const nodeGroups = gNodes\n    .selectAll(\"g\")\n    .data(nodes)\n    .enter()\n    .append(\"g\")\n    .attr(\"class\", \"node-group\")\n    .attr(\"transform\", (d) => {\n      return `translate(${d.x},${d.y})`;\n    })\n    .call(drag(simulation));\n\n  const nodeCircles = nodeGroups\n    .append(\"circle\")\n    .attr(\"class\", \"node\")\n    .attr(\"cx\", 0)\n    .attr(\"cy\", 0)\n    .attr(\"r\", (d) => d[symbols.nodeSizeSym])\n    .style(\"fill\", (d) => d[symbols.nodeColorSym]);\n\n  if (tooltipParams.show) {\n    nodeCircles.attr(\"data-tooltip\", (d) => d[tooltipParams.dataKey]);\n  }\n\n  if (labelsParams.dataKey !== \"\" && nodes[0][labelsParams.dataKey]) {\n    nodeGroups\n      .append(\"text\")\n      .attr(\"x\", 0)\n      .attr(\"dy\", (d) => labelsParams.margin + d[symbols.nodeSizeSym])\n      .attr(\"class\", \"label\")\n      .attr(\"alignment-baseline\", \"hanging\")\n      .attr(\"text-anchor\", \"middle\")\n      .text((d) => d[labelsParams.dataKey]);\n  }\n\n  let isDragging = false;\n\n  function drag(simulation) {\n    function dragstarted(event) {\n      if (!event.active) {\n        simulation.alphaTarget(0.3).restart();\n      }\n      isDragging = true;\n      event.subject.fx = event.subject.x;\n      event.subject.fy = event.subject.y;\n    }\n\n    function dragged(event) {\n      event.subject.fx = event.x;\n      event.subject.fy = event.y;\n    }\n\n    function dragended(event) {\n      isDragging = false;\n      if (!event.active) {\n        simulation.alphaTarget(0);\n      }\n      event.subject.fx = null;\n      event.subject.fy = null;\n    }\n\n    return d3\n      .drag()\n      .on(\"start\", dragstarted)\n      .on(\"drag\", dragged)\n      .on(\"end\", dragended);\n  }\n\n  if (highlightAdjEdges) {\n    nodeGroups.on(\"mouseover\", function (e, d) {\n      if (isDragging) {\n        return;\n      }\n      // highlight current node\n      d3.select(this).classed(\"active\", true);\n      // fade out all other nodes, highlight a little connected ones\n      nodeGroups\n        .classed(\"fadeout\", (p) => d !== p)\n        .classed(\"half-active\", (p) => {\n          return (\n            p !== d &&\n            d[symbols.edgeSym].some(\n              (edge) =>\n                edge[symbols.sourceNodeSym] === p ||\n                edge[symbols.targetNodeSym] === p\n            )\n          );\n        });\n\n      // fadeout not connected edges, highlight connected ones\n      links\n        .classed(\"fadeout\", (p) => !d[symbols.edgeSym].includes(p))\n        .classed(\"active\", (p) => d[symbols.edgeSym].includes(p));\n    });\n\n    nodeGroups.on(\"mouseleave\", function () {\n      if (isDragging) {\n        return;\n      }\n      links\n        .classed(\"active\", false)\n        .classed(\"fadeout\", false)\n        .classed(\"half-active\", false);\n      nodeGroups\n        .classed(\"active\", false)\n        .classed(\"fadeout\", false)\n        .classed(\"half-active\", false);\n    });\n  }\n}\n","import Stanza from \"togostanza/stanza\";\nimport * as d3 from \"d3\";\nimport loadData from \"togostanza-utils/load-data\";\nimport ToolTip from \"@/lib/ToolTip\";\nimport drawForceLayout from \"./drawForceLayout\";\n\nimport prepareGraphData from \"@/lib/prepareGraphData\";\n\nimport {\n  downloadSvgMenuItem,\n  downloadPngMenuItem,\n  downloadJSONMenuItem,\n  downloadCSVMenuItem,\n  downloadTSVMenuItem,\n  appendCustomCss,\n} from \"togostanza-utils\";\n\nexport default class ForceGraph extends Stanza {\n  menu() {\n    return [\n      downloadSvgMenuItem(this, \"graph-2d-force\"),\n      downloadPngMenuItem(this, \"graph-2d-force\"),\n      downloadJSONMenuItem(this, \"graph-2d-force\", this._data),\n      downloadCSVMenuItem(this, \"graph-2d-force\", this._data),\n      downloadTSVMenuItem(this, \"graph-2d-force\", this._data),\n    ];\n  }\n\n  async render() {\n    appendCustomCss(this, this.params[\"custom-css-url\"]);\n\n    const css = (key) => getComputedStyle(this.element).getPropertyValue(key);\n\n    //data\n\n    const width = parseInt(this.params[\"width\"]);\n    const height = parseInt(this.params[\"height\"]);\n\n    this.renderTemplate({\n      template: \"stanza.html.hbs\",\n    });\n\n    const values = await loadData(\n      this.params[\"data-url\"],\n      this.params[\"data-type\"],\n      this.root.querySelector(\"main\")\n    );\n\n    this._data = values;\n\n    const nodes = values.nodes;\n    const edges = values.links;\n\n    const MARGIN = {\n      TOP: this.params[\"padding\"],\n      BOTTOM: this.params[\"padding\"],\n      LEFT: this.params[\"padding\"],\n      RIGHT: this.params[\"padding\"],\n    };\n\n    // Setting color scale\n    const togostanzaColors = [];\n    for (let i = 0; i < 6; i++) {\n      togostanzaColors.push(css(`--togostanza-series-${i}-color`));\n    }\n    const color = function () {\n      return d3.scaleOrdinal().range(togostanzaColors);\n    };\n\n    const root = this.root.querySelector(\"main\");\n    const el = this.root.getElementById(\"graph-2d-force\");\n\n    const existingSvg = root.getElementsByTagName(\"svg\")[0];\n    if (existingSvg) {\n      existingSvg.remove();\n    }\n    const svg = d3\n      .select(el)\n      .append(\"svg\")\n      .attr(\"width\", width)\n      .attr(\"height\", height);\n\n    this.tooltip = new ToolTip();\n    root.append(this.tooltip);\n\n    const nodeSizeParams = {\n      basedOn: this.params[\"node-size-based-on\"] || \"fixed\",\n      dataKey: this.params[\"node-size-data-key\"] || \"\",\n      fixedSize: this.params[\"node-fixed-size\"] || 3,\n      minSize: this.params[\"node-min-size\"],\n      maxSize: this.params[\"node-max-size\"],\n    };\n    const nodeColorParams = {\n      basedOn: this.params[\"node-color-based-on\"] || \"fixed\",\n      dataKey: this.params[\"node-color-data-key\"] || \"\",\n    };\n\n    const edgeWidthParams = {\n      basedOn: this.params[\"edge-width-based-on\"] || \"fixed\",\n      dataKey: this.params[\"edge-width-data-key\"] || \"\",\n      fixedWidth: this.params[\"edge-fixed-width\"] || 1,\n      minWidth: this.params[\"edge-min-width\"],\n      maxWidth: this.params[\"edge-max-width\"],\n    };\n\n    const edgeColorParams = {\n      basedOn: this.params[\"edge-color-based-on\"] || \"fixed\",\n      dataKey: this.params[\"edge-color-data-key\"] || \"\",\n    };\n\n    const labelsParams = {\n      margin: this.params[\"labels-margin\"],\n      dataKey: this.params[\"labels-data-key\"],\n    };\n\n    const tooltipParams = {\n      dataKey: this.params[\"nodes-tooltip-data-key\"],\n      show: nodes.some((d) => d[this.params[\"nodes-tooltip-data-key\"]]),\n    };\n\n    const highlightAdjEdges = this.params[\"highlight-adjacent-edges\"] || false;\n\n    const params = {\n      MARGIN,\n      width,\n      height,\n      svg,\n      color,\n      highlightAdjEdges,\n      nodeSizeParams,\n      nodeColorParams,\n      edgeWidthParams,\n      edgeColorParams,\n      labelsParams,\n      tooltipParams,\n    };\n\n    const { prepNodes, prepEdges, symbols } = prepareGraphData(\n      nodes,\n      edges,\n      params\n    );\n\n    drawForceLayout(svg, prepNodes, prepEdges, { ...params, symbols });\n\n    if (tooltipParams.show) {\n      this.tooltip.setup(el.querySelectorAll(\"[data-tooltip]\"));\n    }\n  }\n}\n"],"names":["d3\n    .forceSimulation","d3.forceManyBody","d3.forceCenter","d3\n        .forceLink","d3\n        .forceCollide","drag","d3\n      .drag","d3.select","d3.scaleOrdinal","d3\n      .select"],"mappings":"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"}