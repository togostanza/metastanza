{"version":3,"file":"breadcrumbs.js","sources":["../../../home/runner/work/metastanza/metastanza/stanzas/breadcrumbs/assets/home.svg","../../../home/runner/work/metastanza/metastanza/stanzas/breadcrumbs/clipboard.js","../../../home/runner/work/metastanza/metastanza/stanzas/breadcrumbs/index.js"],"sourcesContent":["export default \"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20494.59%20375.12%22%3E%3Cg%20id%3D%22%E3%83%AC%E3%82%A4%E3%83%A4%E3%83%BC_2%22%20data-name%3D%22%E3%83%AC%E3%82%A4%E3%83%A4%E3%83%BC%202%22%3E%3Cg%20id%3D%22%E3%83%AC%E3%82%A4%E3%83%A4%E3%83%BC_1-2%22%20data-name%3D%22%E3%83%AC%E3%82%A4%E3%83%A4%E3%83%BC%201%22%3E%3Cpath%20d%3D%22M244.37%2C103.9l-142.57%2C103V360.12a15%2C15%2C0%2C0%2C0%2C15%2C15h77a15%2C15%2C0%2C0%2C0%2C15-15v-92a15%2C15%2C0%2C0%2C1%2C15-15h48a15%2C15%2C0%2C0%2C1%2C15%2C15v92a15%2C15%2C0%2C0%2C0%2C15%2C15h76a15%2C15%2C0%2C0%2C0%2C15-15V206.87l-142.58-103A5%2C5%2C0%2C0%2C0%2C244.37%2C103.9Z%22%2F%3E%3Cpath%20d%3D%22M488%2C162.13%2C392.8%2C93.38V15.12a15%2C15%2C0%2C0%2C0-15-15h-24a15%2C15%2C0%2C0%2C0-15%2C15V54.38L276.63%2C9.48a50.13%2C50.13%2C0%2C0%2C0-58.67%2C0L6.61%2C162.13A15.94%2C15.94%2C0%2C0%2C0%2C3%2C184.39l20.55%2C28.46a16%2C16%2C0%2C0%2C0%2C22.27%2C3.59L238%2C77.69a15.93%2C15.93%2C0%2C0%2C1%2C18.67%2C0L448.75%2C216.44A16%2C16%2C0%2C0%2C0%2C471%2C212.85l20.55-28.46A15.94%2C15.94%2C0%2C0%2C0%2C488%2C162.13Z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E\"","/**\n * multi browser clipboard copy - ypetya@gmail.com\n * */\n/***\n * This function uses multiple methods for copying data to clipboard\n * 1. document.execCommand('copy') can be supported only for user initiated contexts\n *   - that means we can only determine it on the fly\n *   - d3 eventDispatch is not working this way\n * 2. ClipboardEvent constructor is only defined for Firefox (see MDN)\n *   - for FF, d3 selector uses input's value property instead of selection.text()\n * */\nexport default function (inputNode, action) {\n  // Chrome\n  if (\n    document.queryCommandSupported &&\n    document.queryCommandSupported(action)\n  ) {\n    inputNode.select();\n    document.execCommand(action);\n  } else {\n    // FF\n    const event = new ClipboardEvent(action);\n    const text = inputNode.value;\n    event.clipboardData.setData(\"text/plain\", text);\n    event.preventDefault();\n    document.dispatchEvent(event);\n  }\n}\n","import Stanza from \"togostanza/stanza\";\nimport * as d3 from \"d3\";\nimport homeIcon from \"./assets/home.svg\";\nimport loadData from \"togostanza-utils/load-data\";\nimport {\n  downloadSvgMenuItem,\n  downloadPngMenuItem,\n  downloadJSONMenuItem,\n  downloadCSVMenuItem,\n  downloadTSVMenuItem,\n  copyHTMLSnippetToClipboardMenuItem,\n  appendCustomCss,\n} from \"togostanza-utils\";\n\nimport copyToClipbard from \"./clipboard\";\n\nlet currentDataId;\nlet currentDropdownMenu;\n\nexport default class Breadcrumbs extends Stanza {\n  menu() {\n    return [\n      downloadSvgMenuItem(this, \"breadcrumbs\"),\n      downloadPngMenuItem(this, \"breadcrumbs\"),\n      downloadJSONMenuItem(this, \"breadcrumbs\", this._data),\n      downloadCSVMenuItem(this, \"breadcrumbs\", this._data),\n      downloadTSVMenuItem(this, \"breadcrumbs\", this._data),\n      copyHTMLSnippetToClipboardMenuItem(this),\n    ];\n  }\n\n  handleEvent(event) {\n    event.stopPropagation();\n\n    if (event.target !== this.element) {\n      currentDataId = event.detail.id;\n      this.render();\n    }\n  }\n\n  async render() {\n    const dispatcher = this.element;\n\n    appendCustomCss(this, this.params[\"custom-css-url\"]);\n\n    // const css = (key) => getComputedStyle(this.element).getPropertyValue(key);\n\n    //width\n    const width = this.params[\"width\"];\n    const height = this.params[\"height\"];\n    const showDropdown = this.params[\"show-dropdown\"];\n\n    const data = await loadData(\n      this.params[\"data-url\"],\n      this.params[\"data-type\"],\n      this.root.querySelector(\"main\")\n    );\n    this._data = data;\n\n    if (!currentDataId && this.params[\"initinal-data-id\"]) {\n      currentDataId = this.params[\"initinal-data-id\"];\n    }\n\n    this.renderTemplate({\n      template: \"stanza.html.hbs\",\n    });\n\n    const filteredData = data.filter(\n      (item) => (item.children && !item.n) || (item.n && item.n > 0)\n    );\n\n    //Add root element if there are more than one elements without parent.\n    const rootElemIndexes = [];\n    for (let i = 0; i < filteredData.length - 1; i++) {\n      if (!filteredData[i]?.parent) {\n        rootElemIndexes.push(i);\n      }\n    }\n    if (rootElemIndexes.length > 1) {\n      filteredData.push({ id: -1, value: \"\", label: \"\" });\n\n      rootElemIndexes.forEach((index) => {\n        filteredData[index].parent = -1;\n      });\n    }\n\n    const el = this.root.querySelector(\"#breadcrumbs\");\n\n    // Hide dropdown menu on scroll if any\n    window.document.addEventListener(\"scroll\", () => {\n      if (currentDropdownMenu) {\n        d3.select(currentDropdownMenu).remove();\n      }\n    });\n\n    const opts = {\n      width,\n      height,\n      showDropdown,\n    };\n    renderElement(el, filteredData, opts, dispatcher, currentDataId);\n  }\n}\n\nlet showingD;\n\nfunction renderElement(el, data, opts, dispatcher = null) {\n  const nestedData = d3\n    .stratify()\n    .id((d) => d.id)\n    .parentId((d) => d.parent)(data);\n\n  const container = d3\n    .select(el)\n    .attr(\"style\", `width:${opts.width}px;height:${opts.height}px;`)\n    .append(\"div\")\n    .classed(\"container\", true);\n\n  //Context menu substrate to capture left click without dispatching unnecessary events\n  const subDiv = container\n    .append(\"div\")\n    .classed(\"context-menu-substrate\", true)\n    .style(\"height\", container);\n\n  const contextMenu = subDiv.append(\"div\");\n\n  contextMenu\n    .classed(\"right-click-menu\", true)\n    .append(\"ul\")\n    .append(\"li\")\n    .text(\"Copy path\");\n\n  subDiv.on(\"click\", function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    subDiv.style(\"display\", \"none\");\n    contextMenu.style(\"display\", \"none\");\n  });\n\n  container.on(\"contextmenu\", function (e) {\n    e.stopPropagation();\n    e.preventDefault();\n    const rect = this.getBoundingClientRect();\n\n    subDiv.style(\"display\", \"block\");\n\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    contextMenu\n      .style(\"display\", \"block\")\n      .style(\"left\", `${x}px`)\n      .style(\"top\", `${y}px`);\n  });\n\n  contextMenu.on(\"click\", function (e) {\n    e.stopPropagation();\n    const textarea = container\n      .append(\"textarea\")\n      .classed(\"path-selection\", true);\n\n    const currentPath = getCurrentData(currentDataId)\n      .map((item) => item.data.data.label)\n      .join(\"/\");\n\n    textarea.text(currentPath);\n\n    copyToClipbard(textarea.node(), \"copy\");\n\n    textarea.remove();\n    subDiv.style(\"display\", \"none\");\n    contextMenu.style(\"display\", \"none\");\n  });\n\n  const hierarchyData = d3.hierarchy(nestedData);\n\n  const getCurrentData = (id) => {\n    return hierarchyData\n      .find((item) => {\n        return item.data.data.id === id;\n      })\n      .ancestors()\n      .reverse();\n  };\n\n  function showDropdown(e, datum) {\n    if (showingD === datum) {\n      container.selectAll(\".node-dropdown-menu\").remove();\n      showingD = null;\n      currentDropdownMenu = null;\n      return;\n    }\n\n    showingD = datum;\n\n    container.selectAll(\".node-dropdown-menu\").remove();\n\n    const menuBack = container\n      .append(\"div\")\n      .classed(\"node-dropdown-menu\", true)\n      .style(\"left\", this.parentNode.getBoundingClientRect().left + \"px\")\n      .style(\n        \"top\",\n        this.parentNode.getBoundingClientRect().top +\n          this.parentNode.getBoundingClientRect().height +\n          \"px\"\n      );\n\n    currentDropdownMenu = menuBack.node();\n\n    const rows = menuBack\n      .selectAll(\"div\")\n      .data(datum.parent.children.filter((d) => d !== datum));\n\n    const rowContainer = rows\n      .join(\"div\")\n      .classed(\"node-dropdown-menu-item-container\", true);\n\n    const row = rowContainer\n      .append(\"div\")\n      .classed(\"node-dropdown-menu-item\", true);\n\n    row\n      .filter((d) => d.children)\n      .on(\"click\", (e, d) => {\n        container.selectAll(\".node-dropdown-menu\").remove();\n        showingD = null;\n        currentDropdownMenu = null;\n        dispatcher.dispatchEvent(\n          new CustomEvent(\"selectedDatumChanged\", {\n            detail: { id: d.data.data.id },\n          })\n        );\n        currentDataId = d.data.data.id;\n        return update(getCurrentData(d.data.data.id));\n      });\n\n    row\n      .append(\"span\")\n      .text((d) => d.data.data.label)\n      .classed(\"disabled\", (d) => !d.children);\n\n    //Separator\n    rowContainer.filter((d, i, nodes) => i < nodes.length - 1).append(\"hr\");\n  }\n\n  function update(data) {\n    const breadcrumbNodes = container\n      .selectAll(\"div.breadcrumb-node\")\n      .data(data, (d) => d.data.data.id);\n\n    // REMOVE\n    breadcrumbNodes.exit().remove();\n\n    // ADD\n    const breadcrumbNode = breadcrumbNodes\n      .enter()\n      .append(\"div\")\n      .classed(\"breadcrumb-node\", true);\n\n    const label = breadcrumbNode\n      .append(\"div\")\n      .classed(\"node-label\", true)\n      .on(\"click\", (e, d) => {\n        dispatcher.dispatchEvent(\n          new CustomEvent(\"selectedDatumChanged\", {\n            detail: { id: d.data.data.id },\n          })\n        );\n        currentDataId = d.data.data.id;\n        return update(getCurrentData(currentDataId));\n      });\n\n    label.filter((d) => d.parent).text((d) => d.data.data.label);\n\n    label\n      .filter((d) => !d.parent)\n      .append(\"img\")\n      .attr(\"src\", homeIcon);\n\n    if (opts.showDropdown) {\n      // node dropdown icon\n      breadcrumbNode\n        .append(\"div\")\n        .classed(\"node-dropdown-container\", true)\n        .attr(\"style\", (d) => {\n          if (d.parent && d.parent.children.length > 1) {\n            return null;\n          }\n          return \"display:none\";\n        })\n        .filter((d) => d.parent && d.parent.children.length > 1)\n        .on(\"click\", showDropdown)\n        .append(\"div\")\n        .classed(\"node-dropdown\", true);\n    }\n\n    // node forward icon\n    breadcrumbNode\n      .append(\"div\")\n      .classed(\"node-forward\", true)\n      .attr(\"style\", (d) =>\n        d.children\n          ? opts.showDropdown\n            ? null\n            : \"margin-left:0.4em\"\n          : \"display:none\"\n      );\n\n    // UPDATE\n\n    breadcrumbNodes\n      .filter((d) => d.depth > 0)\n      .selectAll(\"div.node-label\")\n      .text((d) => d.data.data.label);\n  }\n\n  if (!currentDataId) {\n    currentDataId = hierarchyData.find((data) => data.depth === 0).data.data.id;\n  }\n\n  update(getCurrentData(currentDataId));\n}\n"],"names":["d3.select","d3\n    .stratify","d3\n    .select","d3.hierarchy"],"mappings":"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"}