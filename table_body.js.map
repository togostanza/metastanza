{"version":3,"file":"table_body.js","sources":["../../../home/runner/work/metastanza/metastanza/stanzas/table_body/index.js"],"sourcesContent":["export default function tableBody(stanza, params) {\n    let formBody = []\n    for (let key in params) {\n\tif(params[key] && key != \"table_data_api\") formBody.push(key + \"=\" + encodeURIComponent(params[key]))\n    }\n    let options = {\n\tmethod: \"POST\",\n\tmode:  \"cors\",\n\tbody: formBody.join(\"&\"),\n\theaders: {\n\t    \"Accept\": \"application/json\",\t    \n\t    'Content-Type': 'application/x-www-form-urlencoded'\n\t}\n    }\n    console.log(params);\n    console.log(options.body);\n    let url = params.table_data_api;\n    let q = fetch(url, options).then(res => res.json());\n    q.then(function(data){\n        stanza.render({\n            template: \"stanza.html.hbs\"\n        });\n        let div = stanza.select(\"#renderDiv\");\n\tlet table = document.createElement(\"table\");\n\tlet thead = document.createElement(\"thead\");\n\tlet tbody = document.createElement(\"tbody\");\t\n\tdiv.appendChild(table);\n\ttable.appendChild(thead);\n\ttable.appendChild(tbody);\n\t\n\tlet tr = document.createElement(\"tr\");\n\tthead.appendChild(tr);\n\tfor(let i in data.head.vars){\n\t    let th = document.createElement(\"th\");\n\t    th.innerHTML = data.head.vars[i];\n\t    tr.appendChild(th);\n        }\n        for(let i in data.results.bindings){\n\t    tr = document.createElement(\"tr\");\n\t    tbody.appendChild(tr);\n\t    for(let j in data.head.vars){\n\t\tlet td = document.createElement(\"td\");\n\t\ttd.innerHTML = data.results.bindings[i][data.head.vars[j]].value;\n\t\ttr.appendChild(td);\n            }\n\t}\n    });\n}\n"],"names":[],"mappings":"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"}