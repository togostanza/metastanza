{"version":3,"file":"hash-table.js","sources":["../../../home/runner/work/metastanza/metastanza/stanzas/hash-table/index.js"],"sourcesContent":["import loadData from \"@/lib/load-data\";\n\nexport default async function hashTable(stanza, params) {\n  let dataset = await loadData(params[\"data-url\"], params[\"data-type\"]);\n  dataset = dataset[0];\n\n  const columns = params.columns\n    ? JSON.parse(params.columns)\n    : Object.keys(dataset).map((key) => {\n        return { id: key };\n      });\n  const values = columns.map((column) => {\n    const datum_label = Object.keys(dataset).find((datum) => {\n      return datum === column.id;\n    });\n    const label = column.label\n      ? column.label\n      : params[\"format-key\"] === \"true\"\n      ? datum_label.charAt(0).toUpperCase() +\n        datum_label.substring(1).replace(/_/g, \" \")\n      : datum_label;\n    const href = column.link ? dataset[column.link] : null;\n    return {\n      label,\n      value: dataset[column.id],\n      href,\n      unescape: column.escape === false,\n    };\n  });\n  stanza.render({\n    template: \"stanza.html.hbs\",\n    parameters: {\n      values,\n    },\n  });\n\n  const main = stanza.root.querySelector(\"main\");\n  const container = stanza.root.querySelector(\".container\");\n  main.parentNode.style.backgroundColor = \"var(--togostanza-background-color)\";\n  main.parentNode.style.padding = `${params[\"padding\"]}px`;\n  container.setAttribute(\n    \"style\",\n    `\n    width: ${params[\"width\"]}px;\n    height: ${params[\"height\"]}px;\n    `\n  );\n}\n"],"names":[],"mappings":"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"}