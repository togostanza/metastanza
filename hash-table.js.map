{"version":3,"file":"hash-table.js","sources":["../../../home/runner/work/metastanza/metastanza/stanzas/hash-table/index.js"],"sourcesContent":["import Stanza from \"togostanza/stanza\";\nimport loadData from \"togostanza-utils/load-data\";\nimport {\n  downloadJSONMenuItem,\n  downloadCSVMenuItem,\n  downloadTSVMenuItem,\n  copyHTMLSnippetToClipboardMenuItem,\n  appendCustomCss,\n} from \"togostanza-utils\";\n\nexport default class HashTable extends Stanza {\n  menu() {\n    return [\n      downloadJSONMenuItem(this, \"hashtable\", this._data),\n      downloadCSVMenuItem(this, \"hashtable\", this._data),\n      downloadTSVMenuItem(this, \"hashtable\", this._data),\n      copyHTMLSnippetToClipboardMenuItem(this),\n    ];\n  }\n\n  async render() {\n    appendCustomCss(this, this.params[\"custom-css-url\"]);\n\n    const dataset = (\n      await loadData(\n        this.params[\"data-url\"],\n        this.params[\"data-type\"],\n        this.root.querySelector(\"main\")\n      )\n    )[0];\n    this._data = [dataset];\n\n    const columns = this.params.columns\n      ? JSON.parse(this.params.columns)\n      : Object.keys(dataset).map((key) => {\n          return { id: key };\n        });\n    const values = columns.map((column) => {\n      const datum_label = Object.keys(dataset).find((datum) => {\n        return datum === column.id;\n      });\n      const label = column.label\n        ? column.label\n        : this.params[\"format-key\"] === \"true\"\n        ? datum_label.charAt(0).toUpperCase() +\n          datum_label.substring(1).replace(/_/g, \" \")\n        : datum_label;\n      const href = column.link ? dataset[column.link] : null;\n      return {\n        label,\n        value: dataset[column.id],\n        href,\n        unescape: column.escape === false,\n      };\n    });\n    this.renderTemplate({\n      template: \"stanza.html.hbs\",\n      parameters: {\n        values,\n      },\n    });\n\n    const main = this.root.querySelector(\"main\");\n    main.parentNode.style.backgroundColor =\n      \"var(--togostanza-background-color)\";\n    main.parentNode.style.padding = `${this.params[\"padding\"]}px`;\n  }\n}\n"],"names":[],"mappings":"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"}