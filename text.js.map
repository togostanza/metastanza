{"version":3,"file":"text.js","sources":["../../../home/runner/work/metastanza/metastanza/stanzas/text/index.js"],"sourcesContent":["import loadData from \"@/lib/load-data\";\n\nexport default async function text(stanza, params) {\n  stanza.importWebFontCSS(\n    \"https://use.fontawesome.com/releases/v5.6.3/css/all.css\"\n  );\n  const dataset = await loadData(params[\"data-url\"], params[\"data-type\"]);\n  const textBlob = new Blob([dataset.value], {\n    type: \"text/plain\",\n  });\n\n  const textUrl = URL.createObjectURL(textBlob);\n  console.log(textUrl);\n\n  stanza.render({\n    template: \"stanza.html.hbs\",\n    parameters: {\n      rows: [\n        {\n          value: dataset.value,\n        },\n      ],\n      textUrl: URL.createObjectURL(textBlob),\n    },\n  });\n  const width = params[\"width\"];\n  const height = params[\"height\"];\n  const padding = params[\"padding\"];\n  const table = stanza.root.querySelector(\"table\");\n  table.setAttribute(\n    `style`,\n    `width: ${width}px; height: ${height}px; padding: ${padding}px;`\n  );\n\n  const menu = stanza.root.querySelector(\".menu\");\n  switch (params[\"metastanza-menu-placement\"]) {\n    case \"top-left\":\n      break;\n    case \"top-right\":\n      menu.setAttribute(\"style\", \"justify-content: flex-end;\");\n      break;\n    case \"bottom-left\":\n      menu.setAttribute(\"style\", \"flex-direction: column-reverse;\");\n      break;\n    case \"bottom-right\":\n      menu.setAttribute(\n        \"style\",\n        \"justify-content flex-end; flex-direction: column-reverse;\"\n      );\n      break;\n    case \"none\":\n      menu.setAttribute(\"style\", \"display: none;\");\n      break;\n  }\n}\n"],"names":[],"mappings":";;;;;;AAEe,eAAe,IAAI,CAAC,MAAM,EAAE,MAAM,EAAE;AACnD,EAAE,MAAM,CAAC,gBAAgB;AACzB,IAAI,yDAAyD;AAC7D,GAAG,CAAC;AACJ,EAAE,MAAM,OAAO,GAAG,MAAM,QAAQ,CAAC,MAAM,CAAC,UAAU,CAAC,EAAE,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC;AAC1E,EAAE,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;AAC7C,IAAI,IAAI,EAAE,YAAY;AACtB,GAAG,CAAC,CAAC;AACL;AACA,EAAE,MAAM,OAAO,GAAG,GAAG,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;AAChD,EAAE,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AACvB;AACA,EAAE,MAAM,CAAC,MAAM,CAAC;AAChB,IAAI,QAAQ,EAAE,iBAAiB;AAC/B,IAAI,UAAU,EAAE;AAChB,MAAM,IAAI,EAAE;AACZ,QAAQ;AACR,UAAU,KAAK,EAAE,OAAO,CAAC,KAAK;AAC9B,SAAS;AACT,OAAO;AACP,MAAM,OAAO,EAAE,GAAG,CAAC,eAAe,CAAC,QAAQ,CAAC;AAC5C,KAAK;AACL,GAAG,CAAC,CAAC;AACL,EAAE,MAAM,KAAK,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC;AAChC,EAAE,MAAM,MAAM,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC;AAClC,EAAE,MAAM,OAAO,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC;AACpC,EAAE,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;AACnD,EAAE,KAAK,CAAC,YAAY;AACpB,IAAI,CAAC,KAAK,CAAC;AACX,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,YAAY,EAAE,MAAM,CAAC,aAAa,EAAE,OAAO,CAAC,GAAG,CAAC;AACpE,GAAG,CAAC;AACJ;AACA,EAAE,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;AAClD,EAAE,QAAQ,MAAM,CAAC,2BAA2B,CAAC;AAC7C,IAAI,KAAK,UAAU;AACnB,MAAM,MAAM;AACZ,IAAI,KAAK,WAAW;AACpB,MAAM,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,4BAA4B,CAAC,CAAC;AAC/D,MAAM,MAAM;AACZ,IAAI,KAAK,aAAa;AACtB,MAAM,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,iCAAiC,CAAC,CAAC;AACpE,MAAM,MAAM;AACZ,IAAI,KAAK,cAAc;AACvB,MAAM,IAAI,CAAC,YAAY;AACvB,QAAQ,OAAO;AACf,QAAQ,2DAA2D;AACnE,OAAO,CAAC;AACR,MAAM,MAAM;AACZ,IAAI,KAAK,MAAM;AACf,MAAM,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,gBAAgB,CAAC,CAAC;AACnD,MAAM,MAAM;AACZ,GAAG;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}